version: 1
frontend:
  phases:
    build:
      commands:
        - echo "Preparing static assets..."
        - mkdir -p dist
        - cp -r static/* dist/
        # Update API endpoints in static files to use production URLs
        - find dist -name "*.html" -exec sed -i.bak 's|http://localhost:8000|https://api.saigbox.com|g' {} \;
        - find dist -name "*.html" -exec sed -i.bak 's|/api/|https://api.saigbox.com/api/|g' {} \;
        - rm dist/*.bak
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths: []